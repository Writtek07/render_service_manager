<div class="card mt-4 mb-2">
  <div class="card-body">
    <div class="row">
      <div class="col-9 text-center">
        <h5>Remember to run this crontab update button post scheduling all the services</h5>
      </div>
      <div class="col-3">
        <%= button_to "Update Crontab", { action: :update_crontab }, method: :post, class: 'btn btn-outline-success' %>
      </div>
    </div>
  </div>
</div>

<table class="table table-striped table-hover table-bordered">
  <thead>
    <tr>
      <th>Service Name</th>
      <th>Service ID</th>
      <th>Update Schedule(In UTC only)</th>
      <th colspan="2">Actions</th>       
    </tr>
  </thead>
  <tbody>
    <% @services.each do |service| %>
      <tr>
        <td><%= service.name %></td>
        <td><%= service.service_id %></td>        
        <td>            
            <%= form_tag update_schedule_services_path, method: :put, class: 'form-group text-center', id: 'schedule-form' do %>
                <%= hidden_field_tag :time_zone_offset, nil %>

                <%= hidden_field_tag "services[#{service.id}][name]", service.name %>
                <%= hidden_field_tag "services[#{service.id}][service_id]", service.service_id %>
                <%= time_field_tag "services[#{service.id}][custom_start_time]", service.custom_start_time.strftime('%H:%M'), class: 'form-control' %>
                <%= time_field_tag "services[#{service.id}][custom_stop_time]", service.custom_stop_time.strftime('%H:%M'), class: 'form-control' %>
                <%= submit_tag 'Update Schedule', class: 'btn btn-outline-primary mt-2' %>
            <% end %>
        </td>
        <td>
            <div class="btn-group">
                <%= button_to "Start", { action: :start_service, id: service.service_id }, method: :post, class: 'btn btn-outline-success me-2' %>
                <%= button_to "Stop", { action: :stop_service, id: service.service_id }, method: :post, class: 'btn btn-outline-danger' %>
            </div>            
        </td>
      </tr>
    <% end %>
  </tbody>
</table>
